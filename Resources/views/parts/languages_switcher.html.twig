{# Template parameters:
#    - 'routeRef'
#    - 'siteaccess'
#    - 'currentLanguage'
#    - 'availableLanguages'
#}

{% if availableLanguages|length > 1 %}
    <div id="lang-selector" class="transition-showed">
        <ul class="lang-select">

            {% for lang in availableLanguages %}
                {% do routeRef.set( "siteaccess", ezpublish.translationSiteAccess( lang ) ) %}
                    {% if lang == currentLang %}
                        <li class="current">
                            <span class="flag-icon flag-icon-background flag-icon-{{ lang[4:]|lower }}"></span>{{ lang[:3]|lower|capitalize }}
                        </li>
                    {% else %}
                        <li>
                            <a href="{{ url( routeRef ) }}">
                                <span class="flag-icon flag-icon-background flag-icon-{{ lang[4:]|lower }}"></span>{{ lang[:3]|lower|capitalize }}
                            </a>
                        </li>
                    {% endif %}
            {% endfor %}
        </ul>

        <a href="#lang-selector" class="current-lang">
            <span class="current-language flag-icon flag-icon-background flag-icon-{{ currentLanguage[4:]|lower }}"></span>{{ currentLanguage[:3]|lower|capitalize }}&nbsp;â†´
        </a>
    </div>
{% endif %}
